{% extends "base_generic.html" %}

{% block content %}

    <h3>Редактирование заявки</h3>
    <div class="app-display-card app-display-card-edit">
        <div>
            <p class="mb-2 h5 text-center">{{ object.title }}</p>
            <p class="text-secondary mt-1 mb-1">{{ object.time_created_f }}</p>
            <p class="text-white mb-1 text-truncate">{{ object.get_categories }}</p>
        </div>
        <div>
            {% if object.photo %}
                <img src="{{ object.photo.url }}" alt="{{ object.title }}" class="app-display-img"/>
            {% endif %}
            <p>{{ object.get_status_display }}</p>
        </div>
    </div>
    <form method="post" novalidate enctype="multipart/form-data" id="redact_app_form">
        {% csrf_token %}
        {{ form.status }}
        {% if form.status.value == 'w' %}
            <div id="id_design_comment">
                {{ form.design_comment }}
            </div>
        {% elif form.status.value == 'd' %}
            <div id="id_design_photo">
                {{ form.design_photo }}
            </div>
        {% endif %}
        <button type="submit" class="btn-purple">Сохранить</button>
    </form>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script>
            $('#id_status').change(function() {
                console.log('cusses')
                $('#redact_app_form').submit();
            });
        </script>
{% endblock %}